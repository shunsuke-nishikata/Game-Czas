<% notifications.each do |notification| %>
  <% visitor = notification.visitor %>
  <div class='col-xs-8 mx-auto'>
    <div class="row my-notification ">
      <div class="col-xs-3 ">
        <%= link_to user_path(visitor) do %>
          <%= attachment_image_tag notification.visitor, :image, format: 'jpeg' , size: "100x100"%>
        <% end %>
      </div>
      <div class='col-xs-9 d-flex align-items-center notification-text'>
        <strong>
          <%= link_to user_path(notification.visitor) do %>
            <%= notification.visitor.name %>
          <%end %>
        </strong>
        さんが
        
        <% case notification.action %>
        <% when 'follow' then %>
          "あなたをフォローしました"
        <% when 'like' then %>
            あなたの
          <%= link_to event_path(notification.event) do %>
            イベント
          <% end %>
            にいいねしました！
        <% when 'request' then %>
            あなたの
          <%= link_to event_path(notification.event) do %>
            イベント
          <% end %>
            にリクエストしました！
        <% when 'comment' then %>
          <% if notification.event.user_id == notification.visited %>
              あなたの
            <%= link_to event_path(notification.event) do %>
              イベント
            <% end %>
            にコメントしました！
            <p class="text-muted"><%= EventComment.find_by(id: notification.comment.id)&.comment %></p>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="text-muted text-right font-xs notification-time">
      <%= time_ago_in_words(notification.created_at).upcase %>前
    </div>
    <div class="notification-border"></div>
  </div>
<% end %>